!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self)["el-form-schema"]=t()}(this,(function(){"use strict";function CardComponent(e,t,a,l={}){return e("div",{style:{display:"flex",alignItems:"center",width:"100%",borderBottom:"1px solid #E6E7EB",paddingBottom:"5px",marginBottom:"30px",...l}},[e("span",{style:{borderLeft:`4px solid ${a.color||"#5584FF"}`,width:"0px",height:"20px",lineHeight:"20px"}}),e("span",{style:{paddingLeft:"5px",color:"#333333",fontSize:"18px"}},a.title),a.slot&&a.slot.right?e("div",{style:{paddingLeft:"5px",color:"#333333",fontSize:"15px",display:"flex",alignItems:"flex-end",justifyContent:"flex-end",flex:1}},a.slot.right):[]])}function ArrayComponent(createElement,value,data){const{formValues:formValues}=this,listValues=eval(`formValues.${data.name}`);if(data.slot=data.slot||{},data.operator=data.operator||{},data.style=data.style||{marginBottom:listValues.length?"0x":""},!data.type&&listValues.length?data.style.marginBottom="0px":data.style.marginBottom="",listValues&&listValues.length){const e=Object.keys(data.components).length;data.list=listValues.map(((t,a)=>Object.keys(data.components).map(((l,i)=>{data.components[l].labelWidth=data.labelWidthComponents||"0px",data.components[l].$index=a,data.components[l].$isLast=e===i+1,data.components[l].$item=t;const s=deepClone(data.components[l]);return Component(createElement,this,`${data.name}[${a}].${l}`,s)}))))}else data.default||(data.list=[]);if(data.minLimit>0&&0===listValues.length)for(let i=1;i<=data.minLimit;i++)eval(`formValues.${data.name}.push(JSON.parse(JSON.stringify(data.keys)))`);const deleteButton=item=>[createElement("el-button",{style:{marginRight:data.inline?"":"10px",marginLeft:data.inline?"10px":""},props:{icon:"el-icon-delete-solid",disabled:listValues.length===data.minLimit},on:{click:()=>{const arrIndex=data.list.findIndex((e=>e===item));eval(`(formValues.${data.name}).splice(${arrIndex}, 1)`)}}},"string"==typeof data.slot.delete?data.slot.delete:"删除")],addButton=()=>[createElement("el-button",{props:{type:"primary",icon:"el-icon-plus",disabled:listValues.length===data.maxLimit},style:{marginLeft:0!==data.list.length&&data.inline?"20px":"0px"},on:{click:()=>{eval(`formValues.${data.name}.push(JSON.parse(JSON.stringify(data.keys)))`)}}},"string"==typeof data.slot.add?data.slot.add:"新增")],createComponent=(component,type,index)=>component.tag&&"slot"===component.tag||component.slot&&"operator"===type?this.$scopedSlots[component.slot]({delDisabled:listValues.length===data.minLimit,addDisabled:listValues.length===data.maxLimit,keys:JSON.parse(JSON.stringify(data.keys)),prop:data.name,row:listValues[index],index:index,get(prop){return eval(`formValues.${prop}`)}}):[createElement(component.tag,{props:component.props,style:component.style,class:component.class,on:{click:()=>{"add"===type?eval(`formValues.${data.name}.push(JSON.parse(JSON.stringify(data.keys)))`):"delete"===type&&eval(`(formValues.${data.name}).splice(index, 1)`)}}},component.default||component.slot&&component.slot.default)],isTypeOfCard=()=>"card"===data.type,wrapperCardComponent=(e,t)=>createElement("div",{style:{borderTop:0===t?"1px solid #dddddd":"",borderBottom:"1px solid #dddddd",borderLeft:"1px solid #dddddd",borderRight:"1px solid #dddddd",padding:"10px"}},[CardComponent(createElement,value,{slot:{right:createComponent({tag:"el-link",props:{icon:"el-icon-delete-solid",underline:!1,disabled:listValues.length===data.minLimit},slot:{default:"string"==typeof data.slot.delete?data.slot.delete:"删除"}},"delete",t)},title:(data.title||"标题").replace(/\$index/gi,t+1)}),e]),getUUID=e=>{if(listValues.length>0){const t=listValues[e];return t.uuid_key||this.$set(listValues[e],"uuid_key",Math.random().toString(36).substring(2)),t.uuid_key}};let nodes=[data.list.map(((e,t)=>createElement("div",{class:{"el-form--inline":data.inline},key:getUUID(t)},[isTypeOfCard()?wrapperCardComponent(e,t):e,isTypeOfCard()?[]:createElement("el-form-item",{props:{labelWidth:data.inline?"":data.labelWidthComponents||"0px"},style:{margin:data.inline?"":"22px 0"}},isTypeOfCard()?[]:data.operator.slot?createComponent(data.operator,"operator",t):[data.list.length>1||!data.default?"object"==typeof data.slot.delete?createComponent(data.slot.delete,"delete",t):deleteButton(e):[],"object"==typeof data.slot.add?createComponent(data.slot.add,"add",t):addButton()])]))),isTypeOfCard()?createElement("div",{style:{background:"#f9f9f9",padding:"5px 0 5px 20px",borderTop:0===data.list.length?"1px solid #dddddd":"",borderBottom:"1px solid #dddddd",borderLeft:"1px solid #dddddd",borderRight:"1px solid #dddddd"}},[createElement("el-link",{props:{icon:"el-icon-plus",underline:!1,disabled:listValues.length===data.maxLimit},on:{click(){eval(`formValues.${data.name}.push(JSON.parse(JSON.stringify(data.keys)))`)}}},"string"==typeof data.slot.add?data.slot.add:"新增"),data.maxLimit>0?createElement("span",{style:{color:"#f56c6c"}},`（注意：当前限制最多${data.maxLimit}条数据）`):null]):createElement("div",{props:{labelWidth:"0px"}},["object"!=typeof data.slot.add?0===data.list.length?addButton():[]:0===data.list.length?createComponent(data.slot.add,"add",0):[]])];return[createElementBySlot(createElement,data,"before"),createElement("div",{style:{...data.style}},nodes),createElementBySlot(createElement,data,"after")]}function ObjectComponent(createElement,value,data){const componentsList=Object.keys(data.components),{model:model}=this;let isStartInline=!1;const allComponent=componentsList.map(((key,index)=>{data.components[key].$index=data.$index,data.components[key].labelWidth=data.labelWidthComponents||"0px",0===index?isStartInline=!0:0===index&&data.inline&&(data.components[key].style.marginTop="22px"),"array"==data.components[key].tag&&componentsList.length===index+1?data.components[key].isMarginBottom="0px":componentsList.length!==index+1||data.inline||(data.components[key].style.marginBottom=data.type?"12px":"0px"),this.$set(data.components[key],"$item",eval(`model.${data.name}`));const componentDataCopy=deepClone(data.components[key]);return Component(createElement,this,`${data.name}.${key}`,componentDataCopy)})),card=e=>[createElement("div",{style:{border:"1px solid #dddddd",padding:"10px"}},[CardComponent(createElement,value,data,{marginBottom:""+(isStartInline?"20px":"20ox")}),e])];let types={card:()=>card(allComponent),fieldset:()=>fieldsetComponent(createElement,data,allComponent)},nodes=types[data.type]?types[data.type]():allComponent;return nodes=[createElementBySlot(createElement,data,"before"),createElement("el-form-item",{props:{required:data.required},class:{"el-form--inline":data.inline},style:{marginBottom:data.inline&&!data.type?"-22px":"",...data.style}},nodes),createElementBySlot(createElement,data,"after")],nodes}function TableComponent(createElement,value,data){const{formValues:formValues}=this,listValues=eval(`formValues.${data.name}`);data.slot=data.slot||{},data.style=data.style||{marginBottom:data.showValidate?"22px":""},data.operator=data.operator||{};const operatorColumnProps=Object.assign({label:"操作",width:"100px"},data.operator.column||{}),createTableColumns=()=>Object.keys(data.components).map((e=>createElement("el-table-column",{props:data.components[e].column||{},scopedSlots:{default:t=>{data.components[e].labelWidth=data.labelWidth||"0px",data.components[e].showValidate=!data.showValidate,data.components[e].$index=t.$index,data.components[e].$item=t.row;const a=deepClone(data.components[e]);return delete a.label,[Component(createElement,this,`${data.name}[${t.$index}].${e}`,a)]}}}))).concat(createElement("el-table-column",{props:operatorColumnProps,scopedSlots:{default:scope=>data.operator.slot?this.$scopedSlots[data.operator.slot]({delDisabled:listValues.length===data.minLimit,addDisabled:listValues.length===data.maxLimit,...scope}):createElement("el-form-item",{style:{marginBottom:data.showValidate?"22px":"0px"}},[createElement("el-button",{props:{disabled:listValues.length===data.minLimit},on:{click:()=>{eval(`formValues.${data.name}.splice(scope.$index, 1)`)}}},"string"==typeof data.slot.delete?data.slot.delete:"删除")])}}));if(data.minLimit>0&&0===listValues.length)for(let i=1;i<=data.minLimit;i++)eval(`formValues.${data.name}.push(JSON.parse(JSON.stringify(data.keys)))`);listValues.forEach((e=>{e.uuid_key||this.$set(e,"uuid_key",Math.random().toString(36).substring(2))}));let nodes=[createElement("el-table",{props:{data:listValues,size:"small",border:!0,rowKey:"uuid_key",headerCellStyle:{fontSize:"15px",background:"#f9f9f9"},...data.props},style:{width:"100%"}},[data.showIndex?createElement("el-table-column",{props:{type:"index",align:"center"}}):null,createTableColumns()]),createElement("div",{style:{background:"#f9f9f9",padding:"5px 0 5px 20px",borderBottom:"1px solid #EBEEF5",borderLeft:"1px solid #EBEEF5",borderRight:"1px solid #EBEEF5"}},[createElement("el-link",{props:{icon:"el-icon-plus",underline:!1,disabled:listValues.length===data.maxLimit},on:{click(){eval(`formValues.${data.name}.push(JSON.parse(JSON.stringify(data.keys)))`)}}},"string"==typeof data.slot.add?data.slot.add:"新增"),data.maxLimit>0?createElement("span",{style:{color:"#f56c6c"}},`（注意：当前限制最多${data.maxLimit}条数据）`):null])];return[createElementBySlot(createElement,data,"before"),createElement("div",{style:{...data.style}},nodes),createElementBySlot(createElement,data,"after")]}function SlotComponent(createElement,value,data){const{model:model}=this;let nodes=[],rowItem="",modelPath;return modelPath=data.name.substr(0,data.name.lastIndexOf(".")),modelPath&&(rowItem=modelPath.split(".").reduce(((prev,next)=>prev?eval(`prev.${next}`):""),model),rowItem&&Object.keys(rowItem).length>0&&(nodes=[this.$scopedSlots[data.slot]({prop:data.name,row:rowItem,index:data.$index})])),nodes}function ElRadioComponent(e,t,a){const{on:l={},attrs:i={},props:s={},style:n={},items:o=[],keys:d=null}=a;return this.inline||(n.width=""),[createElementBySlot(e,a,"before"),e("el-radio-group",{props:{value:t,placeholder:s.placeholder||"请选择",...i,...s},style:{...n},on:{...l}},(o||[]).map((t=>e("el-radio",{style:{lineHeight:"32px"},props:{key:t.value,disabled:t.disabled,label:d?t[d.value]:t.value}},[d?t[d.label]:t.label])))),createElementBySlot(e,a,"after")]}function ElCheckboxComponent(createElement,value,data){const vm=this,{all:all="",on:on={},attrs:attrs={},props:props={},style:style={},items:items=[],name:name="",keys:keys=null,render:render={before:null,after:null}}=data;if(data.checkAll=data.checkAll||[],data.checkAllDisabled=data.checkAllDisabled||!1,this.inline||(style.width=""),value.length>0&&(value.includes(all)||all&&void 0!==all&&value.length===items.length-1)){const e=items.map((e=>keys?e[keys.value]:e.value));data.checkAll=e,value=JSON.parse(JSON.stringify(e))}let nodes=[createElementBySlot(createElement,data,"before"),createElement("el-checkbox-group",{style:{display:data.inline?"inline-flex":"",...style},props:{value:value,...attrs,...props},on:{...on,input(val){if((all+"").length>0){const e=[];items.filter((t=>{(keys?t[keys.value]:t.value)===all&&e.push(t)})),e.length>0&&(val.includes(all)&&!data.checkAll.includes(all)||!val.includes(all)&&!data.checkAll.includes(all)&&items.length-1===val.length?(val=[],items.forEach(((e,t)=>{data.checkAllDisabled&&(e.disabled=0!==t),val.push(keys?e[keys.value]:e.value)}))):!val.includes(all)&&data.checkAll.includes(all)?(val=[],items.forEach((e=>{e.disabled=!1}))):val.includes(all)&&val.splice(val.indexOf(all),1),data.checkAll=val)}eval(`vm.formValues.${name} = val`)}}},(items||[]).map((e=>createElement("el-checkbox",{props:{key:e.value,disabled:e.disabled,label:keys?e[keys.value]:e.value}},[keys?e[keys.label]:e.label]))),"function"==typeof render.after?render.after.call(vm,createElement):[]),createElementBySlot(createElement,data,"after")];return nodes}function ElSelectComponent(e,t,a){const{on:l={},attrs:i={},props:s={},style:n={},items:o=[],keys:d=null}=a;return[createElementBySlot(e,a,"before"),e("el-select",{props:{value:t,placeholder:s.placeholder||"请选择",...i,...s},style:{...n},on:{...l}},(o||[]).map((t=>e("el-option",{style:{minWidth:n.width},props:{key:t.value,disabled:t.disabled,label:d?t[d.label]:t.label,value:d?t[d.value]:t.value}},null)))),createElementBySlot(e,a,"after")]}const customTags={array:ArrayComponent,object:ObjectComponent,table:TableComponent,card:CardComponent,slot:SlotComponent,"el-radio":ElRadioComponent,"el-checkbox":ElCheckboxComponent,"el-select":ElSelectComponent},slotComponent=function(e,t,a){return Object.keys(a.slot).map((t=>{const l=a.slot[t];return l instanceof Object?l.vmodel?(this.$set(a.slot[t],"isInput",!1),e("template",{slot:t},[Component(e,this,l.vmodel,l)])):e(l.tag,{slot:t,props:l.props,attrs:l.props,style:l.style,class:l.class,on:l.on},"string"==typeof l.slot?l.slot:""):e("template",{slot:t},l||"")}))},createTipComponent=(e,t)=>{const a=e("el-tooltip",{props:{...Object.assign({content:"",placement:"top",effect:"light"},"string"==typeof t.tip?{content:t.tip}:t.tip)}},[e("i",{class:"el-icon-warning",style:{padding:"0 10px",fontSize:"18px"}})]);return t.tip?a:null},createElementBySlot=(e,t,a)=>{if(t.slot&&Object.keys(t.slot).length>0){const l=t.slot[a]||"";return"after"===a&&Object.assign(l.style||{},{paddingLeft:"10px"}),"object"==typeof l?e(l.tag,{class:l.class,props:l.props,style:l.style,attrs:l.attrs,on:l.on},l.slot):l?e("span","after"===a?{style:{margin:"0 10px",...l.style}}:null,l):null}},fieldsetComponent=(e,t,a)=>[e("fieldset",{style:{border:"1px solid #dddddd"}},[e("legend",{style:{color:"#333333",left:"30px",fontSize:"18px",padding:"0 15px"}},t.title),a])],deepClone=e=>{if(null===e)return null;let t=Object.assign({},e);return Object.keys(t).forEach((a=>t[a]="object"==typeof e[a]?deepClone(e[a]):e[a])),Array.isArray(e)?(t.length=e.length,Array.from(t)):t},Component=(createElement,vm,key,item)=>{let{rules:rules=null,labelWidth:labelWidth="",name:name=key,keys:keys={},$index:$index="",items:items=[],tag:tag,on:on={}}=item;item.name=key,item.props&&"string"==typeof item.props.disabled&&(item.props.disabledExpression=item.props.disabled),item.attrs&&"string"==typeof item.attrs.disabled&&(item.attrs.disabledExpression=item.attrs.disabled);const{formValues:formValues,model:model}=vm,value=eval(`formValues.${key}`);item.on=Object.assign(on,{input:function(value){if(eval(`formValues.${name} = value`),["el-select","el-radio","el-checkbox"].includes(tag)&&on.changeExt){const e=items.find((e=>e[keys?keys.value:"value"]==value));on.changeExt.call(vm,value,e)}on.changeUpdateModel&&on.changeUpdateModel.call(vm,{$model:vm.formValues,$item:eval(`formValues.${item.name.slice(0,item.name.lastIndexOf("."))}`),$index:item.$index})}}),vm.debug&&"object"==typeof item.slot&&!["tab","array","table"].includes(tag)&&(item.slot.after=key);const compilerExpressionString=condition=>{if("boolean"==typeof condition||void 0===condition)return condition;if("string"==typeof condition)try{return condition.includes("[$index]")&&$index>-1&&(condition=condition.replace("$index",$index||0)),condition.includes("$item")&&item.$item&&(condition=condition.replace(/(\$item)/g,"item.$item")),condition.includes("$model")&&(condition=condition.replace(/(\$model)/g,"formValues")),eval(condition)}catch(e){console.log(e),console.log(`[condition](${condition})，存在问题`)}};let vifBool=!0;item.vif&&"string"==typeof item.vif&&(vifBool=compilerExpressionString(item.vif)),item.props&&"string"==typeof item.props.disabledExpression&&(item.props.disabled=compilerExpressionString(item.props.disabledExpression)),item.attrs&&"string"==typeof item.attrs.disabledExpression&&(item.attrs.disabled=compilerExpressionString(item.attrs.disabledExpression)),vifBool?vm.validiteFieldSet.delete(name):vm.validiteFieldSet.add(name),item.rules&&(rules.required=vifBool);let nodes=[];return!1!==item.isInput||item.vmodel||(item.style.marin=item.style.margin||"0 0 22px 0"),nodes=customTags[tag]?[customTags[tag].call(vm,createElement,value,item),createTipComponent(createElement,item)]:[createElementBySlot(createElement,item,"before"),createElement(tag,{props:{value:value,...item.props},attrs:item.attrs,style:item.style,class:item.class,on:{...item.on,click(){item.on&&item.on.click.call(item,item.$item,item.$index)}}},"object"==typeof item.slot?0===Object.keys(item.slot).length?value||item.default:slotComponent.call(vm,createElement,value,item):item.slot),createElementBySlot(createElement,item,"after"),createTipComponent(createElement,item)],!1===item.isInput?customTags[tag]?customTags[tag].call(vm,createElement,value,item):nodes:[createElement("el-form-item",{class:{"el-form-item-inline is-set-inline":!["object","array","table"].includes(item.tag)&&item.inline&&!vm.inline},props:{rules:rules,prop:key,labelWidth:labelWidth||vm.labelWidth,label:item.label},style:{display:vifBool?!["object","array","table"].includes(item.tag)&&item.inline?"inline-flex":"":"none",alignItems:!["object","array","table"].includes(item.tag)&&item.inline?"flex-end":null,marginRight:item.inline&&item.slot&&item.slot.after?"0px":"",marginBottom:vm.inline?"":item.showValidate?"0px":item.style&&item.style.marginBottom?item.style.marginBottom:(item.isMarginBottom,"22px")},ref:key},nodes),item.isLastInline?createElement("div",{style:{display:"flex"}}):[]]};var script={model:{prop:"model",event:"input"},props:{model:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},schema:{type:Object,default:()=>({})},isSearchForm:{type:Boolean,default:!1},isExpand:{type:Boolean,default:!1},labelPosition:{type:String,default:"right"},size:{type:String,default:"medium"},inline:{type:Boolean,default:!1},labelSuffix:{type:String,default:""},labelWidth:{type:String,default:"0px"},componentWidth:{type:String,default:"260px"},css:{type:Object,default:()=>({})},type:{type:String,default:""},refName:{type:String,default:()=>`el-form-schema-${Math.random().toString(36).substring(2)}`},debug:{type:Boolean,default:!1},ui:{type:String,default:"el"}},data:()=>({isWatching:!1,validiteFieldSet:new Set,formValues:{}}),watch:{formValues:{handler(e){this.isWatching=!0,this.$emit("input",e)},deep:!0},schema:{handler(e){!this.isWatching&&Object.keys(e).length?this.initSchemasValues():this.isWatching=!1},immediate:!0}},methods:{initSchemasValues(){const e={},t=Object.keys(this.schema).pop();for(const a in this.schema){this.schema[a].$isLast=t===a;const l=this.schema[a];this.initComponentList(l),this.setValueKey(e,a,l)}this.formValues=e,this.$emit("input",e)},initComponentDefaultProps(e){if(e.isMarginBottom=!0,e.isInput=!0,e.$item=null,e.$index=-1,e.$isArrayLast=!1,e.label=e.label||"",e.style=e.style||{},e.slot=e.slot||{},e.props=e.props||{},e.attrs=e.attrs||{},e.rules=e.rules||(e.required?{required:!0,message:"必填"}:null),e.items){const t=JSON.parse(JSON.stringify(e.items));e.items=t.map((e=>"string"==typeof e?{label:e,value:e}:e))}switch(e.tag){case"p":case"a":case"i":case"h1":case"h2":case"h3":case"h4":case"h5":case"div":case"span":break;case"card":e.isInput=!1;break;case"el-divider":e.isInput=!1,Object(e.style,{margin:"16px 0"});break;case"el-input":e.attrs.placeholder=e.props.placeholder||`请输入${e.label}`;break;case"el-date-picker":e.props=Object.assign({placeholder:"请选择日期",startPlaceholder:"开始日期",endPlaceholder:"结束日期",valueFormat:"yyyy-MM-dd",unlinkPanels:!0},e.props),"daterange"===e.props.type?e.default=e.default||[]:e.default=e.default||"";break;case"el-switch":e.default=e.default||!1;break;case"el-cascader":e.default=e.default||[];break;case"el-slider":e.default=e.default||0;break;case"el-time-picker":case"el-time-select":e.props=Object.assign({placeholder:"请选择时间",startPlaceholder:"开始时间",endPlaceholder:"结束时间",valueFormat:"HH:mm:ss"},e.props);break;case"el-select":case"el-radio":case"el-checkbox":e.props.placeholder=e.props.placeholder||`请选择${e.label}`,e.keys=Object.assign({label:"label",value:"value"},e.keys||{}),"el-checkbox"===e.tag&&(e.default=e.default||[],e.checkAll=e.checkAll||[],e.checkAllDisabled=e.checkAllDisabled||!1),e.props.multiple&&(e.default=e.default||[]);break;case"object":e.inline=e.inline||!1;break;case"table":case"array":e.minLimit=e.minLimit||0,e.maxLimit=e.maxLimit||0,e.list=e.list||[],e.showValidate=!1}!e.style.width&&e.isInput&&(e.style.width=this.componentWidth)},initComponentList(e){if(e.components)for(const t in e.components)"inline"in e.components[t]||this.$set(e.components[t],"inline",e.inline),e.components[t].components?this.initComponentList(e.components[t],t):this.initComponentDefaultProps(e.components[t]);else this.initComponentDefaultProps(e)},setValueKey(e,t,a){switch(a.tag){case"object":if(a.components){e[t]={},a.isMarginBottom=!1;for(const l in a.components)a.components[l].isMarginBottom=!0,this.setValueKey(e[t],l,a.components[l])}break;case"table":case"array":let l={};Object.keys(a.components).forEach((e=>{this.setValueKey(l,e,a.components[e])})),a.hasOwnProperty("keys")||(a.keys=l),e[t]=a.default||[];break;default:a.isInput&&(e[t]=this.setDefaultValue(a),"object"==typeof a.slot&&Object.keys(a.slot).forEach((t=>{const l=a.slot[t];if(l instanceof Object&&l.vmodel){if(l.items){const e=JSON.parse(JSON.stringify(l.items));a.slot[t].items=e.map((e=>"string"==typeof e?{label:e,value:e}:e))}e[l.vmodel]=this.setDefaultValue(l)}})))}},setDefaultValue:e=>void 0!==e.default&&null!==e.default?e.default:"",renderFormItem(e,t,a,l=!0){return Component(e,this,a,t,l)},renderFormItems(e){return Object.keys(this.schema).map(((t,a)=>(this.schema[t].name=t,this.isExpand&&(this.schema[t].expand=0===a||1===a),"slot"===this.schema[t].tag?this.$slots[this.schema[t].slot]:this.renderFormItem(e,this.schema[t],t))))},validate(e){return this.$refs[this.refName].validate(e)},getValidateProps(field){const val=eval(`this.formValues.${field}`);return"object"==typeof val||Array.isArray(val)?Array.isArray(val)?0===val.length?[field]:val.map(((e,t)=>this.getValidateProps(`${field}[${t}]`))).flat(1/0):Object.keys(val).reduce(((e,t)=>(t.includes("uuid_key")||("object"==typeof val[t]||Array.isArray(val[t])?Array.isArray(val[t])?0===val[t].length?e.push(`${field}.${t}`):val[t].map(((a,l)=>e.push(...this.getValidateProps(`${field}.${t}[${l}]`)))).flat(1/0):e.push(...this.getValidateProps(`${field}.${t}`)):e.push(`${field}.${t}`)),e)),[]):[field]},validateField(e,t){return e=this.getValidateProps(e),this.$refs[this.refName]&&this.$refs[this.refName].validateField(e,t)},validateFieldPromise(e){return e=this.getValidateProps(e),Promise.all(e.map((e=>new Promise((t=>{this.$refs[this.refName].validateField(e,(e=>t(e)))}))))).then((e=>0===e.filter((e=>e)).length))},resetFields(){try{this.validiteFieldSet.clear(),this.$refs[this.refName].resetFields()}catch(e){}},clearValidate(e=[]){return e=this.getValidateProps(e),this.$refs[this.refName]&&this.$refs[this.refName].clearValidate(e)}},render(e){const t=this;if(0===Object.keys(t.formValues).length)return[e("template",null)];const a=e("el-form-item",{props:{labelWidth:t.labelWidth,size:t.size,label:" "}},[e("el-button",{props:{type:"primary"},on:{click(){t.$refs[t.refName].validate((e=>{t.$emit("submit",e)}))}}},"查询"),e("el-button",{props:{type:"warning"},on:{click(){t.resetFields(),t.$emit("reset")}}},"重置")]),l=e("el-form",{props:{model:t.formValues,inline:t.inline,labelWidth:t.labelWidth,labelSuffix:t.labelSuffix,size:t.size,disabled:t.disabled,labelPosition:t.labelPosition},ref:t.refName},[...t.renderFormItems(e)||[],...t.$slots.default||[],t.isSearchForm?a:[]]);return"card"===t.type?e("div",{style:{margin:"10px",border:"1px solid #dddddd",padding:"20px 20px 0 20px",borderShadow:"0 2px 12px 0 rgba(0,0,0,.1)"}},[l]):l},updated(){Array.from(this.validiteFieldSet).forEach((e=>{this.clearValidate(e)})),Array.from(document.querySelectorAll(".el-form-item-inline")).forEach((e=>{e.querySelector(".el-form-item__content").style.marginLeft="0px"})),Array.from(document.querySelectorAll(".is-set-inline")).forEach((e=>{e.querySelector(".el-form-item__content").style.marginLeft="0px"}))},__file:"src/packages/el-form-schema.vue"};const install=function(e){if(!install.installed){if(!e.prototype.$ELEMENT)throw new Error("请先安装element-ui");e.component("el-form-schema",script),install.installed=!0}};"undefined"!=typeof window&&window.Vue&&install(window.Vue);var index={install:install};return index}));
